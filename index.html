
<!doctype html>
<html>
<head>
  <title>Network | Basic usage</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script type="text/javascript" src="node_modules/vis/dist/vis.js"></script>
  <link href="node_modules/vis/dist/vis.css" rel="stylesheet" type="text/css" />

  <style type="text/css">
    #wordNetwork {
      width: 600px;
      height: 600px;
      border: 1px solid lightgray;
    }
  </style>
</head>
<body>

<div id="wordNetwork"></div>

<script type="text/javascript">
$.ajax({
  type: 'get', 
  dataType: "xml", 
  url: "sample.xml",
  // data: "arg=L",
  success: function(xml) {
    var list = $(xml).find("List");
    var count = list.attr("count");
    var score = list.attr("score");
    var sDate  = list.attr("sDate");
    var eDate = list.attr("eDate");
    // console.log(sDate, eDate, count, score);

    data_nodes = [{id: 0, label: '', group : 0}];
    data_edges = [];

    if ($(xml).find("List").find("Member").length > 0) {

      $(xml).find("Member").each(function(idx) {

      var id = idx + 1;
      var m_score = $(this).attr("score");
      var children = $(this).clone();
      children.find("Child").each(function(i) {
        // Child 노드 추가
        // console.log(idx, i, $(this).text());
        var sub_idx = id + '.' + i;
        data_nodes.push({id: id + '.' + i, label: $(this).text(), group : id});
        data_edges.push({from: id, to: sub_idx});

      });

      $(this).contents().empty(); 
      var m_text = $(this).text().trim();

      // console.log(idx, m_score, m_text);

      //main 노드 추가
      data_nodes.push({id: id, label: m_text, group : id});
      data_edges.push({from: 0, to: id});

      });

    }
    // console.log(data_nodes);

    var container = document.getElementById('wordNetwork');
    var data = {
      nodes: data_nodes,
      edges: data_edges
    };
    var options = {
      nodes : {
        shape: 'dot',
        size: 30,
        font: {
            size: 20
        },
        borderWidth: 2,
        shadow:true
      },
      edges: {
        width: 2,
        shadow:true
      },      
      layout:{
        randomSeed:2
      }
    };
    var network = new vis.Network(container, data, options);

  }, 
  error: function(xhr, status, error) {
    alert(error); 
  }
});

</script>

</body>
</html>
